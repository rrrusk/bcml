#!/usr/bin/env ruby

THIS_FILE = File.symlink?(__FILE__) ? File.readlink(__FILE__) : __FILE__
$MY_DIRECTORY = File.dirname(THIS_FILE) + '/..'
begin
  require File.dirname(THIS_FILE) + '/../lib/bcml'
rescue LoadError
  require 'bcml'
end

path = File.dirname(ARGV[0])
filename = File.basename(ARGV[0],'.bcml')

p path
p filename
newfile = open("#{path}/#{filename}.html", 'w')
source = open(ARGV[0])
contents = source.read
source.close

bcml = Bcml.new
converted = bcml.exec(contents)

newfile.write(converted)
newfile.close
